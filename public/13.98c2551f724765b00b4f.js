(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Ocfj:function(e,c,i){"use strict";i.r(c),i.d(c,"DocsModule",(function(){return R}));var t=i("8AiQ"),o=i("D57K"),n=i("t5c9"),r=i("Jg5f"),a=i("Mumn"),d=i("1C3z"),l=function(){function e(e){this.http=e,this.apiDoc=a.a.mainUrl+a.a.appApi+"/docs",this.apiFile=a.a.mainUrl+a.a.appApi+"/docs/file"}return e.prototype.getMyDocuments=function(){return this.http.get(this.apiDoc).pipe(Object(r.a)((function(e){return e})))},e.prototype.getUserDocs=function(e){return this.http.get(this.apiDoc+"/uid/"+e).pipe(Object(r.a)((function(e){return e})))},e.prototype.saveDoc=function(e){return this.http.post(this.apiDoc,e).pipe(Object(r.a)((function(e){return e})))},e.prototype.updateDoc=function(e){return this.http.put(this.apiDoc,e).pipe(Object(r.a)((function(e){return e})))},e.prototype.saveFile=function(e){return this.http.post(this.apiFile,e).pipe(Object(r.a)((function(e){return e})))},e.prototype.saveAllFile=function(e){return this.http.post(this.apiFile,e,{reportProgress:!0,observe:"events"}).pipe(Object(r.a)((function(e){switch(e.type){case n.e.UploadProgress:return{status:"progress",message:Math.round(100*e.loaded/e.total)};case n.e.Response:return e.body;default:return"Unhandled event: "+JSON.stringify(e)}})))},e.prototype.updateFile=function(e){return this.http.put(this.apiFile,e).pipe(Object(r.a)((function(e){return e})))},e.prototype.deleteDoc=function(e){return this.http.delete(this.apiDoc+"/remove/"+e).pipe(Object(r.a)((function(e){return e})))},e.\u0275fac=function(c){return new(c||e)(d.hc(n.b))},e.\u0275prov=d.Tb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),s=i("AwSQ"),f=i("2Mvu"),p=i("ZSGP"),u=i("FlLz"),h=i("iZ6s"),m=i("dIiP"),b=i("hOvr"),v=i("TDrE");function g(e,c){1&e&&d.Yb(0,"i",33)}function y(e,c){1&e&&d.Yb(0,"i",34)}function w(e,c){1&e&&d.Yb(0,"i",35)}function D(e,c){1&e&&d.Yb(0,"i",36)}function F(e,c){if(1&e){var i=d.ec();d.dc(0,"div",18),d.dc(1,"div",19),d.dc(2,"div",20),d.Sc(3,g,1,0,"i",21),d.Sc(4,y,1,0,"i",22),d.Sc(5,w,1,0,"i",23),d.Sc(6,D,1,0,"i",24),d.cc(),d.dc(7,"div",25),d.dc(8,"h6"),d.Uc(9),d.cc(),d.dc(10,"span"),d.Uc(11),d.cc(),d.cc(),d.dc(12,"div",26),d.dc(13,"button",27),d.lc("click",(function(){d.Jc(i);var e=c.$implicit;return d.oc(3).download(e)})),d.Yb(14,"i",28),d.cc(),d.dc(15,"button",29),d.lc("click",(function(){d.Jc(i);var e=c.$implicit;return d.oc(3).editDoc(e)})),d.Yb(16,"i",30),d.cc(),d.dc(17,"button",31),d.lc("click",(function(){d.Jc(i);var e=c.$implicit;return d.oc(3).deleteDoc(e)})),d.Yb(18,"i",32),d.cc(),d.cc(),d.cc(),d.cc()}if(2&e){var t=c.$implicit;d.Jb(3),d.vc("ngIf",t.file.link.toLowerCase().includes("pdf")),d.Jb(1),d.vc("ngIf",t.file.link.toLowerCase().includes("doc")),d.Jb(1),d.vc("ngIf",t.file.link.toLowerCase().includes("xls")),d.Jb(1),d.vc("ngIf",t.file.fileType.toLowerCase().includes("image")),d.Jb(3),d.Vc(t.name),d.Jb(2),d.Vc(t.description)}}function S(e,c){if(1&e){var i=d.ec();d.dc(0,"div",37),d.lc("click",(function(){return d.Jc(i),d.oc(3).editDoc(null)})),d.dc(1,"div",19),d.dc(2,"div",20),d.Yb(3,"i",38),d.cc(),d.dc(4,"div",25),d.dc(5,"h6"),d.Uc(6,"Upload Document"),d.cc(),d.cc(),d.cc(),d.cc()}}function k(e,c){if(1&e&&(d.dc(0,"div",14),d.dc(1,"div",15),d.Sc(2,F,19,6,"div",16),d.Sc(3,S,7,0,"div",17),d.cc(),d.cc()),2&e){var i=d.oc(2);d.Jb(2),d.vc("ngForOf",i.docs),d.Jb(1),d.vc("ngIf",i.docs.length<1)}}function U(e,c){if(1&e){var i=d.ec();d.dc(0,"div",2),d.dc(1,"div",3),d.dc(2,"div",4),d.dc(3,"div",5),d.dc(4,"div",6),d.dc(5,"div",7),d.dc(6,"h4"),d.Uc(7,"My Documents "),d.dc(8,"button",8),d.lc("click",(function(){return d.Jc(i),d.oc().refresh()})),d.Yb(9,"i",9),d.cc(),d.dc(10,"div",10),d.lc("click",(function(){return d.Jc(i),d.oc().editDoc(null)})),d.dc(11,"span",11),d.Yb(12,"i",12),d.cc(),d.cc(),d.cc(),d.cc(),d.cc(),d.cc(),d.Sc(13,k,4,2,"div",13),d.cc(),d.cc(),d.cc()}if(2&e){var t=d.oc();d.Jb(13),d.vc("ngIf",t.dataLoaded)}}function x(e,c){1&e&&(d.dc(0,"mat-error"),d.Uc(1," Document Title is "),d.dc(2,"strong"),d.Uc(3,"required"),d.cc(),d.cc())}function J(e,c){1&e&&(d.dc(0,"mat-error"),d.Uc(1," Document Description is "),d.dc(2,"strong"),d.Uc(3,"required"),d.cc(),d.cc())}function I(e,c){1&e&&d.Yb(0,"i",60)}function O(e,c){1&e&&d.Yb(0,"i",61)}function j(e,c){1&e&&d.Yb(0,"i",62)}function C(e,c){1&e&&d.Yb(0,"i",63)}function T(e,c){1&e&&d.Yb(0,"i",64)}function L(e,c){1&e&&(d.dc(0,"span"),d.Uc(1,"Click to select file from your device"),d.cc())}function Y(e,c){if(1&e&&(d.dc(0,"span"),d.Uc(1),d.cc()),2&e){var i=d.oc(2);d.Jb(1),d.Vc(i.pendingUpload[0].name)}}function z(e,c){if(1&e&&(d.dc(0,"span"),d.Uc(1),d.cc()),2&e){var i=d.oc(2);d.Jb(1),d.Vc(i.curFile.name)}}function P(e,c){if(1&e){var i=d.ec();d.dc(0,"div",2),d.dc(1,"div",3),d.dc(2,"div",4),d.dc(3,"div",5),d.dc(4,"div",6),d.dc(5,"div",7),d.dc(6,"h4"),d.Uc(7),d.dc(8,"button",39),d.lc("click",(function(){return d.Jc(i),d.oc().view=1})),d.Yb(9,"i",40),d.cc(),d.cc(),d.cc(),d.cc(),d.cc(),d.dc(10,"form",41),d.dc(11,"div",42),d.dc(12,"div",43),d.dc(13,"mat-form-field",44),d.Yb(14,"input",45),d.Sc(15,x,4,0,"mat-error",46),d.cc(),d.dc(16,"mat-form-field",47),d.Yb(17,"textarea",48),d.Sc(18,J,4,0,"mat-error",46),d.cc(),d.cc(),d.cc(),d.dc(19,"div",15),d.dc(20,"div",49),d.lc("click",(function(){return d.Jc(i),d.Hc(31).click()})),d.dc(21,"div",50),d.Sc(22,I,1,0,"i",51),d.Sc(23,O,1,0,"i",52),d.Sc(24,j,1,0,"i",53),d.Sc(25,C,1,0,"i",54),d.Sc(26,T,1,0,"i",55),d.Sc(27,L,2,0,"span",46),d.Sc(28,Y,2,1,"span",46),d.Sc(29,z,2,1,"span",46),d.cc(),d.cc(),d.dc(30,"input",56,57),d.lc("change",(function(e){return d.Jc(i),d.oc().readURL(e,"passport")})),d.cc(),d.cc(),d.dc(32,"div",15),d.dc(33,"div",58),d.dc(34,"button",59),d.lc("click",(function(){return d.Jc(i),d.oc().submitDoc()})),d.Uc(35,"Save Document"),d.cc(),d.cc(),d.cc(),d.cc(),d.cc(),d.cc(),d.cc()}if(2&e){var t=d.oc();d.Jb(7),d.Wc("",t.title," "),d.Jb(3),d.vc("formGroup",t.docForm),d.Jb(5),d.vc("ngIf",t.submitted&&t.f.name.hasError("required")),d.Jb(3),d.vc("ngIf",t.submitted&&t.f.description.hasError("required")),d.Jb(4),d.vc("ngIf",!t.selFileType),d.Jb(1),d.vc("ngIf",t.selFileType&&t.selFileType.toLowerCase().includes("pdf")),d.Jb(1),d.vc("ngIf",t.selFileType&&t.selFileType.toLowerCase().includes("doc")),d.Jb(1),d.vc("ngIf",t.selFileType&&t.selFileType.toLowerCase().includes("xls")),d.Jb(1),d.vc("ngIf",t.selFileType&&t.selFileType.toLowerCase().includes("image")),d.Jb(1),d.vc("ngIf",!t.selFileType),d.Jb(1),d.vc("ngIf",t.pendingUpload.length>0),d.Jb(1),d.vc("ngIf",t.pendingUpload.length<1&&t.curFile)}}var q=function(){function e(e,c,i,t,o){this.http=e,this.dataService=c,this.formBuilder=i,this.messageService=t,this.confirmService=o,this.view=1,this.dataLoaded=!1,this.docs=[],this.title="Add New Document",this.submitted=!1,this.maxSize=1e7,this.fileUploaded=!1,this.fileType=["image","doc","docx","xls","xlsx","pdf"],this.pendingUpload=[]}return Object.defineProperty(e.prototype,"f",{get:function(){return this.docForm.controls},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.loginUser=this.dataService.getUser(),this.token=this.dataService.getToken(),this.refresh()},e.prototype.refresh=function(){var e=this;this.http.getMyDocuments().pipe(Object(f.a)()).subscribe((function(c){e.docs=c,e.dataLoaded=!0}))},e.prototype.togglePrivate=function(e){},e.prototype.editDoc=function(e){var c,i;this.docForm=this.formBuilder.group({name:[null===(c=e)||void 0===c?void 0:c.name,p.w.required],description:[null===(i=e)||void 0===i?void 0:i.description,p.w.required],private:[!1,p.w.required]}),e?(this.curDoc=e,this.curFile=e.file,this.selFileType=e.file.fileType,this.fileUploaded=!0):(this.curDoc=null,this.curFile=null,this.selFileType=null,this.fileUploaded=!1),this.view=2},e.prototype.deleteDoc=function(e){var c=this;this.confirmService.confirm({message:"Are you sure you want to delete from platform?",header:"Delete Document",icon:"pi pi-exclamation-triangle",accept:function(){c.docs=c.docs.filter((function(c){return c.id!==e.id})),c.http.deleteDoc(e.id).pipe(Object(f.a)()).subscribe((function(){c.messageService.add({severity:"success",summary:"Remove Success",detail:"Document Deleted!"})}))},reject:function(){}})},e.prototype.validateFile=function(e){return"image/png"===e.type.toLowerCase()||"image/jpg"===e.type.toLowerCase()||"image/jpeg"===e.type.toLowerCase()||e.name.toLowerCase().includes("pdf")||e.name.toLowerCase().includes("doc")||e.name.toLowerCase().includes("xls")?this.validateFileSize(e):(this.messageService.add({severity:"error",summary:"File Format Not Supported"}),!1)},e.prototype.validateFileSize=function(e){return this.selFileType=e.type.toLowerCase(),!(e.size>this.maxSize&&(this.messageService.add({severity:"error",summary:"File must not be larger than "+(this.maxSize/1e3).toFixed(0)+" kb"}),this.selFileType=null,1))},e.prototype.readURL=function(e,c){var i=this;if(e.target.files&&e.target.files[0]){var t=e.target.files[0];if(!this.validateFile(t))return;this.uploadError=null,Object(u.c)(t).then((function(e){if(e.name)return i.pendingUpload=[],i.curFile&&(i.curFile.link=null),i.pendingUpload=Object(o.i)(i.pendingUpload,[e]),void(i.fileUploaded=!1);i.messageService.add({severity:"error",summary:"An error occurred loading your file, please try again!"})}))}},e.prototype.passportUpload=function(){var e=this,c=this.curFile;c||((c=new u.a).objID=0,c.tag="documents");var i=Object(u.b)(this.pendingUpload[0],c);this.http.saveFile(i).pipe(Object(f.a)()).subscribe((function(c){e.curFile=c,e.fileUploaded=!0,e.pendingUpload=[];var i=e.docForm.value;i.file=c,i.private=!1,e.curDoc?(e.curDoc=Object(o.a)(Object(o.a)({},e.curDoc),i),e.updateDoc()):(e.curDoc=i,e.saveDoc())}))},e.prototype.saveDoc=function(){var e=this;this.http.saveDoc(this.curDoc).pipe(Object(f.a)()).subscribe((function(c){e.messageService.add({severity:"success",summary:"Document Saved"}),e.docs=Object(o.i)(e.docs,[c]),e.view=1}))},e.prototype.updateDoc=function(){var e=this;this.http.updateDoc(this.curDoc).pipe(Object(f.a)()).subscribe((function(c){e.messageService.add({severity:"success",summary:"Document Updated"}),e.docs[e.docs.indexOf(e.docs.find((function(c){return c.id===e.curDoc.id})))]=c,e.view=1}))},e.prototype.submitDoc=function(){if(this.docForm.updateValueAndValidity(),this.pendingUpload.length<1&&!this.curFile||this.docForm.invalid)this.messageService.add({severity:"error",summary:"Please complete the document form!"});else if(this.fileUploaded&&this.curDoc){var e=this.docForm.value;e.private=!1,this.curDoc=Object(o.a)(Object(o.a)({},this.curDoc),e),this.updateDoc()}else this.passportUpload()},e.prototype.download=function(e){return window.open(a.a.mainUrl+"/api/v1/docs/dl/"+e.file.link+"?token="+encodeURIComponent(this.token),"_blank")},e.\u0275fac=function(c){return new(c||e)(d.Xb(l),d.Xb(s.a),d.Xb(p.c),d.Xb(h.g),d.Xb(h.b))},e.\u0275cmp=d.Rb({type:e,selectors:[["app-docs"]],decls:3,vars:3,consts:[[3,"ngSwitch"],["class","animated fadeIn",4,"ngSwitchCase"],[1,"animated","fadeIn"],[1,"row","py-3","px-4"],[1,"col-md-10","mx-auto"],[1,"bg-white","shadow","rounded","overflow-hidden"],[1,"card","pb-0","mb-0"],[1,"card-header"],[1,"btn","btn-sm","btn-dark","float-right",3,"click"],[1,"fa","fa-refresh"],[1,"file-options","float-right","mr-2",2,"cursor","pointer",3,"click"],[1,"btn-file"],[1,"fa","fa-cloud-upload"],["class","py-4",4,"ngIf"],[1,"py-4"],[1,"row","row-sm"],["class","col-6 col-sm-4 col-md-3 col-lg-4 col-xl-3",4,"ngFor","ngForOf"],["class","col-6 col-sm-4 col-md-3 col-lg-4 col-xl-3","style","cursor: pointer;",3,"click",4,"ngIf"],[1,"col-6","col-sm-4","col-md-3","col-lg-4","col-xl-3"],[1,"card","card-file","shadow"],[1,"card-file-thumb"],["class","fa fa-file-pdf-o",4,"ngIf"],["class","fa fa-file-word-o",4,"ngIf"],["class","fa fa-file-excel-o",4,"ngIf"],["class","fa fa-file-image-o",4,"ngIf"],[1,"card-body"],[1,"card-footer"],["tooltip","Download File",1,"btn","btn-ghost-primary",3,"click"],[1,"fa","fa-cloud-download"],["tooltip","Edit File",1,"btn","btn-ghost-warning",3,"click"],[1,"fa","fa-edit"],["tooltip","Delete File",1,"btn","btn-ghost-danger",3,"click"],[1,"fa","fa-trash-o"],[1,"fa","fa-file-pdf-o"],[1,"fa","fa-file-word-o"],[1,"fa","fa-file-excel-o"],[1,"fa","fa-file-image-o"],[1,"col-6","col-sm-4","col-md-3","col-lg-4","col-xl-3",2,"cursor","pointer",3,"click"],[1,"fa","fa-plus"],[1,"btn","btn-danger","btn-sm","float-right",3,"click"],[1,"fa","fa-close"],[1,"py-4",3,"formGroup"],[1,"row","row-sm","px-4"],[1,"col-12"],[1,"d-block"],["formControlName","name","matInput","","placeholder","Document Title","required",""],[4,"ngIf"],[1,"d-block","mt-3"],["formControlName","description","matInput","","rows","3","placeholder","Document Description","required",""],[1,"col-12","px-4",3,"click"],["id","drop-zone",1,"upload-drop-zone","py-5"],["class","fa fa-cloud-upload fa-4x d-block",4,"ngIf"],["class","fa fa-file-pdf-o fa-4x d-block",4,"ngIf"],["class","fa fa-file-word-o fa-4x d-block",4,"ngIf"],["class","fa fa-file-excel-o fa-4x d-block",4,"ngIf"],["class","fa fa-file-image-o fa-4x d-block",4,"ngIf"],["hidden","","id","imageUpload","type","file",3,"change"],["image",""],[1,"col-12","px-4"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-cloud-upload","fa-4x","d-block"],[1,"fa","fa-file-pdf-o","fa-4x","d-block"],[1,"fa","fa-file-word-o","fa-4x","d-block"],[1,"fa","fa-file-excel-o","fa-4x","d-block"],[1,"fa","fa-file-image-o","fa-4x","d-block"]],template:function(e,c){1&e&&(d.dc(0,"div",0),d.Sc(1,U,14,1,"div",1),d.Sc(2,P,36,12,"div",1),d.cc()),2&e&&(d.vc("ngSwitch",c.view),d.Jb(1),d.vc("ngSwitchCase",1),d.Jb(1),d.vc("ngSwitchCase",2))},directives:[t.o,t.p,t.m,t.l,m.a,p.y,p.p,p.h,b.c,p.b,v.b,p.o,p.f,p.u,b.b],styles:[".upload-drop-zone[_ngcontent-%COMP%]{border-width:2px;margin-bottom:20px;color:#ccc;border-style:dashed;border-color:#ccc;text-align:center;vertical-align:center;width:100%;line-height:2rem;min-height:200px}.upload-drop-zone.drop[_ngcontent-%COMP%]{color:#222;border-color:#222}"]}),e}(),A=i("5/c3"),M=[{path:"",data:{title:"Profile"},children:[{path:"",component:q,data:{title:""}}]}],R=function(){function e(){}return e.\u0275mod=d.Vb({type:e}),e.\u0275inj=d.Ub({factory:function(c){return new(c||e)},imports:[[t.c,A.g.forChild(M),m.b.forRoot(),b.e,p.t,v.c]]}),e}()}}]);